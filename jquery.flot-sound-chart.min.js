!function(o){o.flotSoundChart=function(t,e){t.append("<div id='flotSoundChart'></div>");var l=o("#flotSoundChart"),s={initControllerValue:0,onReleaseController:function(o){},width:574,height:370,controllerClass:"",controllerTextClass:"",controllerDragSize:1,plot:{axisX:{min:1,max:30,gridSize:5,showGrid:!0},axisY:{min:1,max:100,gridSize:10,showGrid:!0},areaDownside:{label:!1,color:"#4ECBDE"},areaUpside:{label:!1,color:"#FE5A2B"},crosslineColor:"#074E57"}},i="y",n=null,a=[],r=[],p={},d=null,u=null,c={x:0,y:0},f=0,h={},y={},x={},C=0,v=0,g=0,m=0,b=0,w=0,S=0,D=null,z="dB",Y=0,X=null,E=null,T=function(){for(var o=0;o<a.length;o++){var t=a[o][0],e=a[o][1],l=r[o][0],s=r[o][1],i=e+s;e=i>S?S:i,s=i>S?i-S:null,a[o]=[t,e],r[o]=[l,s]}},G=function(o,t){for(var e=[],l=1,s=o;o>=l;l+=t,s-=t)e.push([l,s]);return e},k=function(o,t){for(var e=[],l=0,s=0;o>=l;l+=t,s+=t)e.push([l,s]);return e},N=function(o){u.find("span").html(o),E=null},U=function(){for(var o=0;o<document.styleSheets.length;o++){var t=document.styleSheets[o].href,e=/^(.*)(flot-sound-chart\.css)$/gi;if(e.test(t)===!0)return!0}return!1};return opts=o.extend(!0,{},s,e||{}),v="undefined"==typeof opts.plot.axisX.min?1:opts.plot.axisX.min,C="undefined"==typeof opts.plot.axisX.max?30:opts.plot.axisX.max,g="undefined"==typeof opts.plot.axisX.showGrid?!0:opts.plot.axisX.showGrid,b="undefined"==typeof opts.plot.axisY.min?1:opts.plot.axisY.min,m="undefined"==typeof opts.plot.axisY.max?100:opts.plot.axisY.max,w="undefined"==typeof opts.plot.axisY.showGrid?!0:opts.plot.axisY.showGrid,S="undefined"==typeof opts.initControllerValue||isNaN(opts.initControllerValue)?b:parseInt(opts.initControllerValue),S=b>S?b:S>m?m:S,f="undefined"==typeof opts.controllerDragSize||isNaN(opts.controllerDragSize)?1:parseInt(opts.controllerDragSize),l.css({width:"undefined"==typeof opts.width?null:opts.width,height:"undefined"==typeof opts.height?null:opts.height}),p=[{label:"undefined"==typeof opts.plot.areaDownside.label||0==opts.plot.areaDownside.label?null:opts.plot.areaDownside.label,color:"undefined"==typeof opts.plot.areaDownside.color?"#4ECBDE":opts.plot.areaDownside.color,data:a},{label:"undefined"==typeof opts.plot.areaUpside.label||0==opts.plot.areaUpside.label?null:opts.plot.areaUpside.label,color:"undefined"==typeof opts.plot.areaUpside.color?" #FE5A2B":opts.plot.areaUpside.color,data:r}],n=o.plot(l,p,{series:{stack:!0,bars:{show:!0,barWidth:.6,lineWidth:0,fillColor:{colors:[{opacity:1},{opacity:1}]},align:"center"},xaxis:1,yaxis:1,clickable:!1,hoverable:!1,shadowSize:0},xaxis:{show:g,min:v,max:C,ticks:G(C,"undefined"==typeof opts.plot.axisX.gridSize?5:opts.plot.axisX.gridSize)},yaxis:{show:w,min:b,max:m,ticks:k(m,"undefined"==typeof opts.plot.axisY.gridSize?10:opts.plot.axisY.gridSize)},grid:{show:!0,hoverable:!1,autoHighlight:!1,clickable:!1},crosshair:{mode:i,lineWidth:2,color:"undefined"==typeof opts.plot.crosslineColor?"#074E57":opts.plot.crosslineColor}}),h=n.p2c({x:1,y:S}),y=n.p2c({x:C,y:b}),D=o("<div class='labelAxisY' style='position: absolute;'>("+z+")</div>"),l.append(D),d=o("<div id='controller' class='controller-bar' style='position: absolute;'><div id='dbvalue' class='controller-val'><span></span>"+z+"</div></div>"),l.append(d),"undefined"!=typeof opts.controllerClass&&opts.controllerClass&&""!=opts.controllerClass&&d.removeClass().addClass(opts.controllerClass),u=o("div#dbvalue",l),"undefined"!=typeof opts.controllerTextClass&&opts.controllerTextClass&&""!=opts.controllerTextClass&&u.removeClass().addClass(opts.controllerTextClass),d.draggable({axis:i,start:function(o,t){var e=t.position.top;x=n.c2p({left:0,top:Math.floor(e)+c.y})},drag:function(o,t){var e=Math.floor(t.position.top);return e<-c.y?!1:e>y.top-c.y?!1:(x=n.c2p({left:0,top:e+c.y}),x.y=Math.floor(x.y),x.y<b?x.y=b:x.y>m&&(x.y=m),n.setCrosshair({x:1,y:x.y}),void(E||(E=setTimeout(function(){N(x.y)},50))))},stop:function(t,e){S=x.y==b?b:x.y==m?m:Math.round(x.y/f)*f,basePos=n.p2c({x:C,y:S}),clearInterval(E),N(S),d.css({top:basePos.top-c.y}),n.setCrosshair({x:1,y:S}),T(),o.isFunction(opts.onReleaseController)&&opts.onReleaseController.call(l,S)}}),u.find("span").html(S),X=setInterval(function(){U()===!0&&(clearTimeout(X),X=null,c={x:d.width()/2-(o.browser.msie?8:0),y:d.height()/2-5},d.css({left:n.width()+c.x,top:h.top-c.y}).delay(300).show(),n.lockCrosshair({x:1,y:S})),Y++,Y>=10&&(clearTimeout(X),X=null)},500),this.run=function(){},this.stop=function(){},this.pushCurrentData=function(o){if("NaN"!=parseInt(o)){var t=o>S?S:o,e=o>S?o-S:null,l=[C,t],s=[C,e];a.push(l),r.push(s),a.length>C-v+1&&(a=a.splice(1,C),r=r.splice(1,C)),p[0].data=a,p[1].data=r,n.setData(p),n.setupGrid(),n.draw();for(var i=0;i<a.length;i++)a[i]=[a[i][0]-1,a[i][1]],r[i]=[r[i][0]-1,r[i][1]]}},this}}(jQuery);